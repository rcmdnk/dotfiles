# https://github.com/openai/codex/blob/main/codex-rs/config.md

#model ="gpt-5"

approval_policy = "on-request"
#approval_policy = "never"

# Need danger-full-access to run git commands automatically
# https://github.com/openai/codex/issues/5034
sandbox_mode    = "workspace-write"
#sandbox_mode    = "danger-full-access"

#model_reasoning_effort = "high"
model_reasoning_effort = "medium"
network_access = true

# notify = ["bash", "-c", "..."]

[shell_environment_policy]
inherit = "all"
#ignore_defualt_excludes = false
#exclude = ["AWS_*", "AZURE_*"]
#set = { CI = "1" }
#include_only = ["PATH", "HOME"]

[tools]
web_search = true

# does not work?
#[mcp_servers.codex]
#type = "stdio"
#command = "codex"
#args = ["mcp"]
#description = "Codex MCP: Codex MCP is a framework that allows the Codex CLI to connect with external tools, services, and AI models in a standardized way."

[mcp_servers.context7]
command = "context7-mcp"
args = ["--api-key", "${CONTEXT7_API_KEY}"]

[mcp_servers.serena]
command = "serena"
args = ["start-mcp-server", "--context", "codex", "--enable-web-dashboard", "false"]

[mcp_servers.playwright]
command = "mcp-server-playwright"
args = []

[mcp_servers.chrome-devtools]
command = "chrome-devtools-mcp"
args = []

[mcp_servers.aws-knowledge-mcp-server]
command = "fastmcp"
args = ["run", "https://knowledge-mcp.global.api.aws"]

# Need to run git command with workspace-write, as .git directory is not writable in workspace-write mode (https://github.com/openai/codex/issues/5034)
[mcp_servers.mcp-server-git]
command = "mcp-server-git"
args = []


#[mcp_servers.github]
# environmental value for token does not work
#command = "mcp-proxy"
#args = [
#  "--transport",
#  "streamablehttp",
#  "-H",
#  "Authorization",
#  "Bearer ${GITHUB_MCP_API_TOKEN}",
#  "https://api.githubcopilot.com/mcp/",
#]
